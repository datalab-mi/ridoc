image: "ghcr.io/datalab-mi/ridoc-elasticsearch"
imageTag: "feat-kubernetes"
imagePullPolicy: "IfNotPresent"

replicas: 1
minimumMasterNodes: 1

resources:
  requests:
    cpu: "500m"
    memory: "1Gi"
  limits:
    cpu: "500m"
    memory: "1Gi"


#https://github.com/elastic/helm-charts/issues/1013
clusterHealthCheckParams: "timeout=30s"
#"wait_for_status=green&timeout=1s"
secret:
  enabled: true
  password: "elastic"
   # generated randomly if not defined

protocol: https
createCert: true

# esConfig:
#   elasticsearch.yml: |
#     xpack.security.enabled: true
#     xpack.security.transport.ssl.enabled: false
#     xpack.security.http.ssl.enabled: false

# Config testÃ©e 
# protocol https,createCert / xpack.ssl false/tru 
volumeClaimTemplate:
  accessModes: ["ReadWriteOnce"]
  resources:
    requests:
      storage: 10Gi

# service:
#   enabled: true
#   type: ClusterIP

extraVolumes:
- name: extras
  persistentVolumeClaim:
    claimName: extras

extraVolumeMounts:
- name: extras
  mountPath: /usr/share/elasticsearch/data/extra
  readOnly: true

# extraInitContainers:
#   - name: init-container
#     image: busybox
#     command: ['sh', '-c', 'echo "Initialization complete" > /data/init-complete']
#     volumeMounts:
#     - mountPath: /usr/share/elasticsearch/data/extra
#       name: data
#   volumes:
#   - name: data
#     persistentVolumeClaim:
#       claimName: data